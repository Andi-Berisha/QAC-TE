"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useAnimateScrollLeft;

var _react = require("react");

function step(from, to, stepper, index) {
  var next = from;

  for (var i = 0; i < index; i++) {
    next = stepper(next, to);
  }

  return next;
}

function squareStepper(current, to) {
  var sign = Math.sign(to - current);
  var step = Math.sqrt(Math.abs(to - current));
  var next = current + step * sign;

  if (sign > 0) {
    return Math.min(to, next);
  } else {
    return Math.max(to, next);
  }
}

function useAnimateScrollLeft(element, to, onEnd) {
  (0, _react.useEffect)(function () {
    if (element) {
      var start = Date.now();
      var animator;

      var animate = function animate(from) {
        animator = requestAnimationFrame(function () {
          var nextValue = step(from, to, squareStepper, (Date.now() - start) / 5);

          if (Math.abs(to - nextValue) < 0.5) {
            nextValue = to;
          }

          element.scrollLeft = nextValue;

          if (to === nextValue) {
            onEnd && onEnd(true);
          } else {
            animate(from);
          }
        });
      };

      animate(element.scrollLeft);
      return function () {
        return cancelAnimationFrame(animator);
      };
    }
  }, [element, to, onEnd]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9ob29rcy9pbnRlcm5hbC91c2VBbmltYXRlU2Nyb2xsTGVmdC5qcyJdLCJuYW1lcyI6WyJzdGVwIiwiZnJvbSIsInRvIiwic3RlcHBlciIsImluZGV4IiwibmV4dCIsImkiLCJzcXVhcmVTdGVwcGVyIiwiY3VycmVudCIsInNpZ24iLCJNYXRoIiwic3FydCIsImFicyIsIm1pbiIsIm1heCIsInVzZUFuaW1hdGVTY3JvbGxMZWZ0IiwiZWxlbWVudCIsIm9uRW5kIiwic3RhcnQiLCJEYXRlIiwibm93IiwiYW5pbWF0b3IiLCJhbmltYXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibmV4dFZhbHVlIiwic2Nyb2xsTGVmdCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsU0FBU0EsSUFBVCxDQUFjQyxJQUFkLEVBQW9CQyxFQUFwQixFQUF3QkMsT0FBeEIsRUFBaUNDLEtBQWpDLEVBQXdDO0FBQ3RDLE1BQUlDLElBQUksR0FBR0osSUFBWDs7QUFFQSxPQUFLLElBQUlLLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdGLEtBQXBCLEVBQTJCRSxDQUFDLEVBQTVCLEVBQWdDO0FBQzlCRCxJQUFBQSxJQUFJLEdBQUdGLE9BQU8sQ0FBQ0UsSUFBRCxFQUFPSCxFQUFQLENBQWQ7QUFDRDs7QUFFRCxTQUFPRyxJQUFQO0FBQ0Q7O0FBRUQsU0FBU0UsYUFBVCxDQUF1QkMsT0FBdkIsRUFBZ0NOLEVBQWhDLEVBQW9DO0FBQ2xDLE1BQU1PLElBQUksR0FBR0MsSUFBSSxDQUFDRCxJQUFMLENBQVVQLEVBQUUsR0FBR00sT0FBZixDQUFiO0FBQ0EsTUFBTVIsSUFBSSxHQUFHVSxJQUFJLENBQUNDLElBQUwsQ0FBVUQsSUFBSSxDQUFDRSxHQUFMLENBQVNWLEVBQUUsR0FBR00sT0FBZCxDQUFWLENBQWI7QUFDQSxNQUFNSCxJQUFJLEdBQUdHLE9BQU8sR0FBR1IsSUFBSSxHQUFHUyxJQUE5Qjs7QUFFQSxNQUFJQSxJQUFJLEdBQUcsQ0FBWCxFQUFjO0FBQ1osV0FBT0MsSUFBSSxDQUFDRyxHQUFMLENBQVNYLEVBQVQsRUFBYUcsSUFBYixDQUFQO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsV0FBT0ssSUFBSSxDQUFDSSxHQUFMLENBQVNaLEVBQVQsRUFBYUcsSUFBYixDQUFQO0FBQ0Q7QUFDRjs7QUFFYyxTQUFTVSxvQkFBVCxDQUE4QkMsT0FBOUIsRUFBdUNkLEVBQXZDLEVBQTJDZSxLQUEzQyxFQUFrRDtBQUMvRCx3QkFBVSxZQUFNO0FBQ2QsUUFBSUQsT0FBSixFQUFhO0FBQ1gsVUFBTUUsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEdBQUwsRUFBZDtBQUVBLFVBQUlDLFFBQUo7O0FBRUEsVUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBQXJCLElBQUksRUFBSTtBQUN0Qm9CLFFBQUFBLFFBQVEsR0FBR0UscUJBQXFCLENBQUMsWUFBTTtBQUNyQyxjQUFJQyxTQUFTLEdBQUd4QixJQUFJLENBQUNDLElBQUQsRUFBT0MsRUFBUCxFQUFXSyxhQUFYLEVBQTBCLENBQUNZLElBQUksQ0FBQ0MsR0FBTCxLQUFhRixLQUFkLElBQXVCLENBQWpELENBQXBCOztBQUVBLGNBQUlSLElBQUksQ0FBQ0UsR0FBTCxDQUFTVixFQUFFLEdBQUdzQixTQUFkLElBQTJCLEdBQS9CLEVBQW9DO0FBQ2xDQSxZQUFBQSxTQUFTLEdBQUd0QixFQUFaO0FBQ0Q7O0FBRURjLFVBQUFBLE9BQU8sQ0FBQ1MsVUFBUixHQUFxQkQsU0FBckI7O0FBRUEsY0FBSXRCLEVBQUUsS0FBS3NCLFNBQVgsRUFBc0I7QUFDcEJQLFlBQUFBLEtBQUssSUFBSUEsS0FBSyxDQUFDLElBQUQsQ0FBZDtBQUNELFdBRkQsTUFFTztBQUNMSyxZQUFBQSxPQUFPLENBQUNyQixJQUFELENBQVA7QUFDRDtBQUNGLFNBZCtCLENBQWhDO0FBZUQsT0FoQkQ7O0FBa0JBcUIsTUFBQUEsT0FBTyxDQUFDTixPQUFPLENBQUNTLFVBQVQsQ0FBUDtBQUVBLGFBQU87QUFBQSxlQUFNQyxvQkFBb0IsQ0FBQ0wsUUFBRCxDQUExQjtBQUFBLE9BQVA7QUFDRDtBQUNGLEdBNUJELEVBNEJHLENBQUNMLE9BQUQsRUFBVWQsRUFBVixFQUFjZSxLQUFkLENBNUJIO0FBNkJEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5mdW5jdGlvbiBzdGVwKGZyb20sIHRvLCBzdGVwcGVyLCBpbmRleCkge1xuICBsZXQgbmV4dCA9IGZyb207XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7XG4gICAgbmV4dCA9IHN0ZXBwZXIobmV4dCwgdG8pO1xuICB9XG5cbiAgcmV0dXJuIG5leHQ7XG59XG5cbmZ1bmN0aW9uIHNxdWFyZVN0ZXBwZXIoY3VycmVudCwgdG8pIHtcbiAgY29uc3Qgc2lnbiA9IE1hdGguc2lnbih0byAtIGN1cnJlbnQpO1xuICBjb25zdCBzdGVwID0gTWF0aC5zcXJ0KE1hdGguYWJzKHRvIC0gY3VycmVudCkpO1xuICBjb25zdCBuZXh0ID0gY3VycmVudCArIHN0ZXAgKiBzaWduO1xuXG4gIGlmIChzaWduID4gMCkge1xuICAgIHJldHVybiBNYXRoLm1pbih0bywgbmV4dCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KHRvLCBuZXh0KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VBbmltYXRlU2Nyb2xsTGVmdChlbGVtZW50LCB0bywgb25FbmQpIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuXG4gICAgICBsZXQgYW5pbWF0b3I7XG5cbiAgICAgIGNvbnN0IGFuaW1hdGUgPSBmcm9tID0+IHtcbiAgICAgICAgYW5pbWF0b3IgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIGxldCBuZXh0VmFsdWUgPSBzdGVwKGZyb20sIHRvLCBzcXVhcmVTdGVwcGVyLCAoRGF0ZS5ub3coKSAtIHN0YXJ0KSAvIDUpO1xuXG4gICAgICAgICAgaWYgKE1hdGguYWJzKHRvIC0gbmV4dFZhbHVlKSA8IDAuNSkge1xuICAgICAgICAgICAgbmV4dFZhbHVlID0gdG87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZWxlbWVudC5zY3JvbGxMZWZ0ID0gbmV4dFZhbHVlO1xuXG4gICAgICAgICAgaWYgKHRvID09PSBuZXh0VmFsdWUpIHtcbiAgICAgICAgICAgIG9uRW5kICYmIG9uRW5kKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhbmltYXRlKGZyb20pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBhbmltYXRlKGVsZW1lbnQuc2Nyb2xsTGVmdCk7XG5cbiAgICAgIHJldHVybiAoKSA9PiBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRvcik7XG4gICAgfVxuICB9LCBbZWxlbWVudCwgdG8sIG9uRW5kXSk7XG59XG4iXX0=